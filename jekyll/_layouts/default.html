<!DOCTYPE html>
<html lang="en-us">
  {% include head.html %}
  <body>
    <!-- This if statement decides which sidebar to use -->
    {% include sidebar.html %}

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="small-wrap">
        <div id="page-title"></div>
        <div class="page-toc"></div>
      </div>

      <div class="container content" id="main">
        <article>{{ content }}</article>
      </div>
    </div>

    <script type="text/javascript">
      $( document ).ready(function() {
        $("a[href='" + window.location.pathname.replace(/\/$/, "") + "']").parentsUntil('ol.tree').children('input').attr('checked', true);

        $('article > h1').detach().appendTo('#page-title');

        var links = $(".content h2[id!=''][id],.content h3[id!=''][id],.content h4[id!=''][id]");
        if (links.length > 2) {
          $(".page-toc").append('<h4>Table of Contents</h4><details></details>');
          links.each(function(i, item){
            var tag = $(item).attr('id');
            $(".page-toc details").append('<p><a class="page-toc-' + item.localName + '" href="#' + tag + '">' + $(item).text() + '</a></p>');
          });
        }
      });
    </script>
    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
  </body>
</html>
